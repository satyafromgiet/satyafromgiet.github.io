<!DOCTYPE html>
<html>

<head>
  <title>Satya Music Streaming</title>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <link rel="stylesheet" href="player.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3113182995502797"
     crossorigin="anonymous"></script>
</head>

<body onload="getSongData()">
  <img src="" id="background" />
  <audio src="" id="song"></audio>

  <div class="container">
    <div class="box"></div>
    <img src="" id="thumbnail" />

    <img src="./assets/icons/play.png" onclick="playPause()" id="play-pause" />

    <div class="song-artist" id="name"></div>
    <div class="song-title" id="artist"></div>

    <!-- Input element for progress bar - min=0 starting value of every song - max length will change per song so leave empty -->

    <input type="range" id="progress-bar" min="0" max="" value="0" onchange="changeProgressBar()" />

    <div class="currentTime"></div>
    <div class="durationTime"></div>
    
  </div>

  <a id="Download" style="position: absolute; bottom: 5; align-self: center; z-index: 999;  font-size: 14px>Download HD Audio</a>

  <script src="player.js"></script>
</body>
<script>
  getSongData = async () => {
    let songData = sessionStorage.getItem('songData')
    songData = JSON.parse(songData)
    console.log("SONG DATA :::::", songData)
    const finalSong = await fetch('https://saavn.dev/api/songs?ids='+songData.id, {
            method: 'GET', // *GET, POST, PUT, DELETE, etc.
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            },
        }).then(response => response.json());

    console.log("Final Song ::::::", finalSong)
    document.getElementById('name').innerHTML = finalSong.data[0].name
    document.getElementById('artist').innerHTML = finalSong.data[0]. artists.primary[0].name

    document.getElementById('background').setAttribute('src', finalSong.data[0].image[2].url)
    document.getElementById('thumbnail').setAttribute('src', finalSong.data[0].image[2].url)
    document.getElementById('song').setAttribute('src', finalSong.data[0].downloadUrl[4].url)
document.getElementById('Download').setAttribute('href', finalSong.data[0].downloadUrl[4].url)


  }

</script>

</html>
